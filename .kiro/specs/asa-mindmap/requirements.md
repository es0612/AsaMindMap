# 要件定義書

## 概要

AsaMindMapは、ユーザーがアイデアを視覚的に整理・共有できるiOS向けマインドマップアプリケーションです。学生、ビジネスプロフェッショナル、クリエイターを対象とし、iOSネイティブなジェスチャーと同期機能を備えた直感的なアイデア整理ツールを提供します。基本機能は無料、プレミアム機能は有料のフリーミアムモデルを採用します。

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、新しいマインドマップを作成して、中心概念から始まるアイデアを視覚的に整理したい。

#### 受け入れ基準

1. ユーザーがアプリを開いたとき、システムは「新しいマインドマップを作成」オプションを目立つように表示する
2. ユーザーが「新しいマインドマップを作成」をタップしたとき、システムは中央ノードを持つ新しいキャンバスを作成する
3. ユーザーが中央ノードをタップしたとき、システムはメイントピックのテキスト入力を可能にする
4. ユーザーが中央ノードのテキストを確定したとき、システムはマインドマップを自動的に保存する

### 要件2

**ユーザーストーリー:** ユーザーとして、ノードを追加・編集して、アイデアの分岐構造を構築したい。

#### 受け入れ基準

1. ユーザーが既存のノードをタップしたとき、システムは子ノードを追加するオプションを表示する
2. ユーザーがノードからドラッグしたとき、システムは接続線を作成し、新しい子ノードの配置を可能にする
3. ユーザーがノードをダブルタップしたとき、システムはテキスト編集モードを有効にする
4. ユーザーがノードのテキストを変更したとき、システムは表示をリアルタイムで更新する
5. ユーザーが編集中のノードの外側をタップしたとき、システムは変更を自動的に保存する

### 要件3

**ユーザーストーリー:** ユーザーとして、ノードの外観をカスタマイズして、異なる種類の情報を視覚的に区別したい。

#### 受け入れ基準

1. ユーザーがノードを長押ししたとき、システムは書式設定オプション（色、フォント、サイズ）を表示する
2. ユーザーが色オプションを選択したとき、システムは選択されたノードに即座に色を適用する
3. ユーザーがフォント設定を変更したとき、システムはノードの外観をリアルタイムで更新する
4. ユーザーがプレミアムユーザーの場合、システムは高度な書式設定オプションへのアクセスを提供する

### 要件4

**ユーザーストーリー:** ユーザーとして、ノードにメディアコンテンツを追加して、視覚的要素でマインドマップを豊かにしたい。

#### 受け入れ基準

1. ユーザーがノードのメディアボタンをタップしたとき、システムは画像、ステッカー、リンクのオプションを表示する
2. ユーザーが画像を選択したとき、システムはフォトライブラリまたはカメラからのインポートを可能にする
3. ユーザーがリンクを追加したとき、システムはURL形式を検証する
4. ノードにメディアが追加されたとき、システムはコンテンツに合わせてノードのサイズを適切に調整する

### 要件5

**ユーザーストーリー:** ユーザーとして、大きなマインドマップを簡単にナビゲートして、コンテキストを失うことなく特定の領域に焦点を当てたい。

#### 受け入れ基準

1. ユーザーが画面をピンチしたとき、システムはスムーズにズームイン・ズームアウトする
2. ユーザーが2本指でドラッグしたとき、システムはキャンバスをパンする
3. ユーザーが空白部分をダブルタップしたとき、システムはマインドマップ全体を画面にフィットさせる
4. ユーザーがノードをタップしたとき、システムはそのブランチにフォーカスするオプションを提供する
5. フォーカスモードがアクティブなとき、システムは他のブランチを薄暗くし、選択されたブランチをハイライトする

### 要件6

**ユーザーストーリー:** ユーザーとして、タグやタスクでノードを整理して、進捗を追跡し情報を分類したい。

#### 受け入れ基準

1. ユーザーがノードにタグを追加したとき、システムはノード上にタグを視覚的に表示する
2. ユーザーがノードをタスクに変換したとき、システムはノードにチェックボックスを追加する
3. ユーザーがタスクをチェックしたとき、システムは視覚的な表示で完了としてマークする
4. マインドマップを表示するとき、システムはタスクを含むブランチの進捗インジケーターを表示する

### 要件7

**ユーザーストーリー:** ユーザーとして、テキストからマインドマップを素早く作成して、手動でノードを作成することなく迅速にアイデアをキャプチャしたい。

#### 受け入れ基準

1. ユーザーが「クイックエントリー」モードを選択したとき、システムはテキスト入力インターフェースを表示する
2. ユーザーが構造化されたテキストを入力したとき、システムはインデントに基づいてノードを自動生成する
3. 自動生成が完了したとき、システムは結果のマインドマップをレビュー用に表示する
4. ユーザーが生成されたマップを承認したとき、システムは通常のマインドマップとして保存する

### 要件8

**ユーザーストーリー:** ユーザーとして、マインドマップをエクスポートして、他の人と共有したり他のアプリケーションで使用したりしたい。

#### 受け入れ基準

1. ユーザーがエクスポートボタンをタップしたとき、システムは形式オプション（PDF、PNG、OPML、CSV）を表示する
2. ユーザーがPDFエクスポートを選択したとき、システムは視覚的レイアウトを保持した高品質PDFを生成する
3. ユーザーがPNGエクスポートを選択したとき、システムは透明背景オプション付きの画像を作成する
4. エクスポートが完了したとき、システムはiOS共有シートを通じて共有オプションを提供する

### 要件9

**ユーザーストーリー:** ユーザーとして、デバイス間でマインドマップを同期して、どこからでも作業にアクセスしたい。

#### 受け入れ基準

1. ユーザーがiCloud同期を有効にしたとき、システムはマインドマップをCloudKitにアップロードする
2. ユーザーが別のデバイスでアプリを開いたとき、システムは同期されたマインドマップをダウンロードして表示する
3. 同期中に競合が発生したとき、システムはユーザーに解決オプションを提示する
4. 同期が進行中のとき、システムは同期ステータスインジケーターを表示する

### 要件10

**ユーザーストーリー:** ユーザーとして、マインドマップを他の人と共有して、コラボレーションやアイデアのプレゼンテーションを行いたい。

#### 受け入れ基準

1. ユーザーが共有をタップしたとき、システムは共有可能なリンクを生成する
2. 誰かが共有リンクを開いたとき、システムはマインドマップを読み取り専用モードで表示する
3. 受信者がアプリをインストールしている場合、システムはマインドマップのインポートを提案する
4. 共有がアクティブなとき、システムは所有者がアクセスを取り消すことを可能にする

### 要件11

**ユーザーストーリー:** Apple Pencilを使用するiPadユーザーとして、手で描画・書き込みを行って、より自然で表現豊かなマインドマップを作成したい。

#### 受け入れ基準

1. Apple Pencilが検出されたとき、システムは手書きモードを有効にする
2. ユーザーがApple Pencilで描画したとき、システムは筆圧感度付きでストロークをキャプチャする
3. ユーザーがApple Pencilでテキストを書いたとき、システムはテキスト認識オプションを提供する
4. 手書きコンテンツが追加されたとき、システムはタイプされたコンテンツとシームレスに統合する

### 要件12

**ユーザーストーリー:** アクセシビリティニーズを持つユーザーとして、支援技術でアプリが動作して、すべての機能を効果的に使用したい。

#### 受け入れ基準

1. VoiceOverが有効なとき、システムはすべてのインターフェース要素に説明的なラベルを提供する
2. ユーザーがVoiceOverでナビゲートするとき、システムはノードの関係と階層を音声で伝える
3. Dynamic Typeが有効なとき、システムはテキストを適切にスケールする
4. ユーザーが高コントラストモードを有効にしたとき、システムはより良い視認性のために色を調整する

### 要件13

**ユーザーストーリー:** ユーザーとして、アプリがスムーズに動作して、ラグやクラッシュによってクリエイティブなフローが中断されないようにしたい。

#### 受け入れ基準

1. ユーザーがノードを追加したとき、システムは0.5秒以内に応答する
2. マインドマップが最大500ノードを含むとき、システムはスムーズなパフォーマンスを維持する
3. アプリが実行中のとき、システムは最小限のバッテリー電力を消費する
4. アプリがエラーに遭遇したとき、システムはデータ損失なしで適切に回復する